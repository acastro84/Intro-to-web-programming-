<!DOCTYPE html>
<html lang="en">
<head>
   <!--
       New Perspectives on HTML5 and CSS3, 7th Edition
       Tutorial 9
       Case Problem 2
    
       Bridger College Student Union home page
       Author: Armando Castro 
       Date:   3.28.2021

       Filename: index.html
   -->


   -->
   <meta charset="UTF-8" />
   <title>The Math Table Calculator</title>
   <link href="mt_base.css" rel="stylesheet" />
   <link href="mt_styles.css" rel="stylesheet" />
   <link href="mt_calc.css" rel="stylesheet" />

   <script src="mt_calc.js" async></script>
  
</head>

<body>
   <header>
      <div>
         Username
		 <input type="text" id="user" name="user" size="16" />
		 Password
		 <input type="password" id="pwd" name="pwd" size="16" />
	  </div>
	  <img src="mt_logo.png" alt="the Math Table" />

	  <nav class="horizontal">
		 <ul>
		    <li><a href="#">Arithmetic</a></li>
			<li><a href="#">Algebra</a></li>
			<li><a href="#">Geometry</a></li>
			<li><a href="#">Statistics</a></li>
		 </ul>
	  </nav>
	</header>

	  <nav class="vertical">
		 <ul>
			<li><a href="#">Elementary Addition</a></li>
			<li><a href="#">Elementary Subtraction</a></li>
			<li><a href="#">The Multiplication Table</a></li>
			<li><a href="#">Division</a></li>
			<li><a href="#">Long Division</a></li>

			<li class="newgroup"><a href="#">Understanding Decimals</a></li>
			   <li><a href="#">The Powers of Ten</a></li>

			<li class="newgroup"><a href="#">Fractions</a></li>
			   <li><a href="#">Mixed Numbers</a></li>
			   <li><a href="#">Order of Operations</a></li>

			<li class="newgroup"><a href="#">Ratios and Proportions</a></li>
			   <li><a href="#">Percentages</a></li>

			<li class="newgroup"><a href="#">Lowest Common Multiple</a></li>
			   <li><a href="#">Greatest Common Divisor</a></li>
			   <li><a href="#">Prime Factors</a></li>

			<li class="newgroup"><a href="#">Practice Exams</a></li>
			   <li><a href="#">Mental Math Tricks</a></li>
			   <li><a href="#">Calculator</a></li>
		 </ul>
	  </nav>

   <article>
	  <h1>Calculator</h1>
	  <table id="calculator">
		 <tr>
		    <td colspan="5">
			<textarea id="calcWindow" name="calcWindow"></textarea>
			</td>
		 </tr>
		 <tr>
		    <td>
			   <input type="button" class="calcButton" value="del" />
		    </td>
		    <td>
		 	  <input type="button" class="calcButton" value="bksp" />
		    </td>
		    <td>
		 	  <input type="button" class="calcButton" value="prev" />
		    </td>
		 	  <td colspan="2" id="decimalTD">
			   <label>dec</label>
			   <input id="decimals" type="number" min="0" max="9" step="1" value="4" size="1" />
		    </td>   
	     </tr>
		 <tr>
		    <td>
			   <input type="button" class="calcButton" value="7" />
			</td>
			<td>
			   <input type="button" class="calcButton" value="8" />
			</td>
			<td>
			   <input type="button" class="calcButton" value="9" />
			</td>
			<td>
			   <input type="button" class="calcButton" value="/" />
			</td>
			<td>
			   <input type="button" class="calcButton" value="(" />
			</td>
		 </tr>
		 <tr>
		    <td>
			   <input type="button" class="calcButton" value="4" />
			</td>
			<td>
			   <input type="button" class="calcButton" value="5" />
			</td>
			<td>
			   <input type="button" class="calcButton" value="6" />
			</td>
			<td>
			   <input type="button" class="calcButton" value="*" />
			</td>
			<td>
			   <input type="button" class="calcButton" value=")" />
			</td>
		 </tr>
		 <tr>
		    <td>
			   <input type="button" class="calcButton" value="1" />
			</td>
			<td>
			   <input type="button" class="calcButton" value="2" />
			</td>
			<td>
			   <input type="button" class="calcButton" value="3" />
			</td>
			<td>
			   <input type="button" class="calcButton" value="-" />
			</td>
			   <td rowspan="2">
			<input type="button" class="calcButton" value="enter" />
			</td>

		 </tr>
		 <tr>
		    <td colspan="2">
			<input type="button" class="calcButton" value="0" />
			</td>
		 <td>
		    <input type="button" class="calcButton" value="." />
		 </td>
		 <td>
		    <input type="button" class="calcButton" value="+" />
		 </td>
		 </tr>
	   </table>
  
	   <aside>
	      <p>Use this calculator to perform basic operations
		     and test your work.
		  </p>
		  <ol>
		     <li>Press <strong>del</strong> or the <strong>Delete</strong> key on your
			 keyboard to clear the calculator window.</li>
			 <li>Press <strong>bksp</strong> or the <strong>Backspace</strong> key on
			 your keyboard to delete the previous character.</li>
			 <li>Press <strong>prev</strong> or the <strong>&uarr;</strong> key on
your keyboard to insert the previous equation.</li>
			 <li>Change the number of decimals shown by editing the value in the
<strong>dec</strong> box.</li>
		  </ol>
       </aside>
   </article>

<footer>
   The Math Table:
      <i>A math resource for the homeschooling family</i>
      <span>
	     <a href="#">About</a>
	     <a href="#">Terms</a>
	     <a href="#">Help</a>
	  </span>
</footer>

</body>

</html>



<!--
"use strict";

/*
   New Perspectives on HTML5, CSS3 and JavaScript 6th Edition
   Tutorial 11
   Case Problem 2

   Author: Armando Castro
   Date:   3.28.2021
   
   Filename: mt_calc.js
	
   Functions List:

   init()
      Initializes the contents of the web page and sets up the
      event handlers
      
   buttonClick(e)
      Adds functions to the buttons clicked within the calcutlor
      
   calcKeys(e)
      Adds functions to key pressed within the calculator window 
      
   eraseChar(textStr)
      Erases the last character from the text string, textStr
      
   evalEq(textStr, decimals) 
      Evaluates the equation in textStr, returning a value to the number of decimals specified by the decimals parameter

   lastEq(textStr) 
      Returns the previous expression from the list of expressions in the textStr parameter

*/






/* ===================================================================== */

window.onload = init;

function init() {
   // Button handlers here
   var calculatorButtons = document.getElementsByClassName("calcButton");
   for (var i = 0; i < calculatorButtons.length; i++) {
      calculatorButtons[i].onclick = buttonClick;
   }

   // Detect if a key is pressed on calc. 
   document.getElementById("calcWindow").addEventListener("keydown", calcKeys);
}

function buttonClick(e) {
   // Set attributes for calculations
   var calculatorValue = document.getElementById("calcWindow").value;
   var calculatorDecimal = document.getElementById("decimals").value;
   var buttonVal = e.target.value;

   // If clicked, which button? 
   switch (buttonVal) {
      case "del":
         calculatorValue = "";
         break;
      case "bksp":
         calculatorValue = eraseChar(calculatorValue);
         break;
      case "enter":
	     calculatorValue += " = " + evalEq(calculatorValue, calculatorDecimal) + "\n";
		 break;
	  case "prev":
		 calculatorValue += lastEq(calculatorValue);
		 break;
	 default:
		 calculatorValue += buttonVal;
   }

   // Reset value of calculatorValue back to calcWindow
   document.getElementById("calcWindow").value = calculatorValue;
   document.getElementById("calcWindow").focus();
}

function calcKeys(e) {
   // Set attributes for calculations
   var calculatorValue = document.getElementById("calcWindow").value;
   var calculatorDecimal = document.getElementById("decimals").value;
   var pushedValue = e.key;

   // Check which key was pressed
   switch (pushedValue) {
      case "Delete":
	     calculatorValue = "";   
		 break;
	  case "Enter":
		 calculatorValue += " = " + evalEq(calculatorValue, calculatorDecimal) + "\n";
		 
		 // Prevent browser from skipping a line
		 e.preventDefault();
		 break;
	  case "ArrowUp":
		 calculatorValue += lastEq(calculatorValue);

		 // Prevent browser from moving up page
		 e.preventDefault();
		 break;
   }

   // Set value of calculatorValue back to calcWindow
   document.getElementById("calcWindow").value = calculatorValue;
}

function eraseChar(textStr) { 
   return textStr.substr(0, textStr.length - 1);
}

function evalEq(textStr, decimals) {
   var lines = textStr.split(/\r?\n/);
   var lastLine = lines[lines.length-1];
   var eqValue = eval(lastLine);
   return eqValue.toFixed(decimals);
}  

function lastEq(textStr) {
   var lines = textStr.split(/\r?\n/);
   var lastExp = lines[lines.length-2];
   return lastExp.substr(0, lastExp.indexOf("=")).trim();
}

-->
